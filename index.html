<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SpeakFlow Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  background:#020617;
  color:#e5e7eb;
  font-family:Arial, sans-serif;
  margin:0;
  padding:20px;
}
h1 { color:#22d3ee; text-align:center; }
#game {
  max-width:800px;
  margin:auto;
  background:#0f172a;
  padding:20px;
  border-radius:12px;
}
#text {
  font-size:22px;
  margin:20px 0;
  min-height:80px;
}
button,input {
  padding:12px;
  margin:5px 0;
  width:100%;
  font-size:16px;
  border-radius:8px;
  border:none;
}
button {
  background:#22d3ee;
  cursor:pointer;
}
button:hover { background:#06b6d4; }
#stats {
  display:flex;
  justify-content:space-between;
  margin-top:10px;
  font-weight:bold;
}
.bad { color:#f87171; }
.good { color:#4ade80; }
.fade { animation: fade 0.6s forwards; }
@keyframes fade { to { opacity:0; } }
</style>
</head>
<body>

<h1>ðŸŽ¤ SpeakFlow Pro</h1>

<div id="game">
  <div id="tier">Tier: Foundation</div>
  <div id="level">Level 1</div>

  <div id="text"></div>

  <input id="input" placeholder="Type here if needed">

  <button onclick="listen()">ðŸŽ¤ Speak</button>
  <button onclick="checkTyping()">âœ… Submit</button>
  <button onclick="playAudio()">ðŸ”Š Listen</button>

  <div id="feedback"></div>

  <div id="stats">
    <span>Score: <span id="score">0</span></span>
    <span>Lives: <span id="lives">3</span></span>
    <span>Streak: <span id="streak">0</span></span>
  </div>
</div>

<script>
const content = [
  ["Success begins with disciplined action.","Confidence grows through repetition."],
  ["Clear communication builds trust.","Listening improves influence."],
  ["Professional language reflects competence.","Your voice sells your ideas."],
  ["This product solves real customer problems.","Value creates loyalty."],
  ["Strategic communication drives leadership.","Negotiation requires clarity and control."]
];

let tier=0, level=0, index=0;
let score=0, lives=3, streak=0;

const textEl=document.getElementById("text");
const tierEl=document.getElementById("tier");
const levelEl=document.getElementById("level");
const feedback=document.getElementById("feedback");

function load() {
  if (tier >= content.length) {
    textEl.innerHTML="ðŸ† MASTER LEVEL ACHIEVED";
    return;
  }
  textEl.classList.remove("fade");
  textEl.innerText = content[tier][index];
  tierEl.innerText="Tier: "+["Foundation","Fluency","Communication","Marketing","Executive"][tier];
  levelEl.innerText="Level "+(tier*10+index+1);
}

load();

function normalize(t){return t.toLowerCase().replace(/[^a-z ]/g,"").trim();}

function success(){
  score+=10;
  streak++;
  textEl.classList.add("fade");
  setTimeout(()=>{
    index++;
    if(index>=content[tier].length){ tier++; index=0; }
    load();
  },500);
}

function fail(){
  lives--;
  streak=0;
  feedback.innerHTML="<span class='bad'>Incorrect</span>";
  if(lives<=0){
    textEl.innerHTML="âŒ GAME OVER â€“ Restart to improve";
  }
}

function update(){
  document.getElementById("score").innerText=score;
  document.getElementById("lives").innerText=lives;
  document.getElementById("streak").innerText=streak;
}

function checkTyping(){
  const val=document.getElementById("input").value;
  if(normalize(val)===normalize(textEl.innerText)){
    feedback.innerHTML="<span class='good'>Excellent</span>";
    success();
  } else fail();
  update();
}

function playAudio(){
  const u=new SpeechSynthesisUtterance(textEl.innerText);
  speechSynthesis.speak(u);
}

function listen(){
  const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
  if(!SR){ alert("Speech not supported"); return;}
  const r=new SR();
  r.lang="en-US";
  r.start();
  r.onresult=e=>{
    const said=e.results[0][0].transcript;
    if(normalize(said)===normalize(textEl.innerText)){
      feedback.innerHTML="<span class='good'>Perfect pronunciation</span>";
      success();
    } else fail();
    update();
  };
}
</script>

</body>
</html>
